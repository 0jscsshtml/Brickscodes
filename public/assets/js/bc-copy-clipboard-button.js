function initButtonApp(){document.querySelectorAll(".brxe-bc-copy-clipboard-button").forEach((t=>{const e=t.querySelectorAll("svg"),o=t.getAttribute("data-copy-text"),n=t.getAttribute("data-copied-text"),a=t.getAttribute("data-copy-title"),i=t.getAttribute("data-copied-title"),c=t.getAttribute("data-reset-delay"),d=Array.from(t.classList);t.addEventListener("click",(function(){let r="";if(t.getAttribute("data-copy-content"))r=t.getAttribute("data-copy-content");else if(t.getAttribute("data-selector-content")){const e=t.getAttribute("data-selector-content"),o=document.querySelector(e),n=t.getAttribute("data-exclude-tags")?t.getAttribute("data-exclude-tags").split(",").map((t=>t.trim().toLowerCase())):[];if(o){r=function t(e){let o="",a=!0;return e.childNodes.forEach((e=>{if(e.nodeType===Node.TEXT_NODE){const t=e.textContent.trim();t&&(a||(o+="\n"),o+=t,a=!1)}else if(e.nodeType===Node.ELEMENT_NODE&&!n.includes(e.tagName.toLowerCase())){const n=t(e);n&&(a||(o+="\n"),o+=n,a=!1)}})),o}(o).trim()}}else if(t.getAttribute("data-element-content"))r=t.getAttribute("data-element-content");else if(t.hasAttribute("data-template-id")){r=!1;const o=t.getAttribute("data-template-id")||0,a={action:"bc_export_template",nonce:bc_copy_clipboard_ajax.nonce,id:o},c=Object.keys(a).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(a[t]))).join("&");fetch(bc_copy_clipboard_ajax.bc_copy_clipboard_ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c}).then((t=>t.json())).then((o=>{if(o.success){const a=new Blob([o.data.content],{type:"application/json"}),c=document.createElement("a");c.href=window.URL.createObjectURL(a),c.download=o.data.name,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(c.href);const d=Array.from(t.childNodes).filter((t=>t.nodeType===Node.TEXT_NODE&&""!==t.textContent.trim()));if(d.length>0){d[d.length-1].textContent=n}else t.append("Copied");e&&e.length>1&&(e[0].style.display="none",e[1].style.display="inline-block"),t.classList.add("bricks-background-success"),t.classList.remove("bricks-background-primary"),t.setAttribute("title",i)}else"User is logged out."===o.data.message&&alert("Please log in to download template.")})).catch((t=>{console.error("Error:",t)}))}r?navigator.clipboard.writeText(r).then((()=>{const o=Array.from(t.childNodes).filter((t=>t.nodeType===Node.TEXT_NODE&&""!==t.textContent.trim()));if(o.length>0){o[o.length-1].textContent=n}else t.append(n);e&&e.length>1&&(e[0].style.display="none",e[1].style.display="inline-block"),t.classList.add("bricks-background-success"),t.classList.remove("bricks-background-primary"),t.setAttribute("title",i),alert("Text content copied to clipboard!")})).catch((t=>console.error("Error copying text:",t))):t.hasAttribute("data-template-id")||alert("No text found to copy."),c&&setTimeout((()=>{t.className="",t.classList.add(...d),t.setAttribute("title",a),t.childNodes.forEach((t=>{t.nodeType===Node.TEXT_NODE&&""!==t.textContent.trim()&&(t.textContent=o)})),e&&e.length>1&&(e[0].style.display="inline-block",e[1].style.display="none")}),1e3*parseInt(c))}))}))}document.addEventListener("DOMContentLoaded",(()=>{initButtonApp()}));
